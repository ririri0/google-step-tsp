# Week6 Homework

2opt.pyが今回の課題のプログラムになります。

## 実行方法
以下のようなディレクトリ構成にしてください。

```
google-step-tsp
├── input_0.csv
├── input_1.csv
├── input_2.csv
├── input_3.csv
├── input_4.csv
├── input_5.csv
├── input_6.csv
├── common.py
├── solver_greedy.py
├── 2opt.py
└── 2opt.cpp
```

以下をターミナル上で実行してください
```
python3 2opt.py
```

## 考え方
- google-step-tspの中にあったPythonプログラムを多く用いています。
- 貪欲法で解いた答えを2optアルゴリズムで改善しています。
- 2optアルゴリズムの基本方針としては、交差している辺を解消することによって距離を短くしています。
- 貪欲法の始点によって得られる距離が異なるため、アルゴリズムとしては同じでも距離を短くすることができると思い、全ての点を始点とする解を求めて、一番距離の短い経路を出力するようなプログラムにしようと考えましたが、実行時間が長いため、UpgradeSolveGreedyの中で0を始点とした答えしか出さないようになっています。
- Pythonの実行にとても時間がかかります。input_6は特に時間がかかるので、main関数のrangeを適宜変更してください。
- 計算時間を制限するために、2opt法では、全ての経路をループする回数の制限を設けてbreakするようにしています。(Solve2opt内count)output_5までの結果は制限しないで実行した結果、output_6については1000回を制限とした結果を出力しています。
- 実行速度のためにcppで実装しようとしたら解放済みメモリの上書きエラーが出てしまってうまく実行ができませんでした。途中経過を2opt.cppとして置いておきます。
- 点をいくつかのクラスタに分割して制約条件のもと解いて繋げる方法を思いつきましたが、直線にクラスタを区切ってしまうと逆におかしなことになると思い諦めました。